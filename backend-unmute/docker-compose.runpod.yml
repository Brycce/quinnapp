version: '3.8'

services:
  # Frontend - Unmute web UI
  frontend:
    image: ghcr.io/kyutai-labs/unmute-frontend:latest
    ports:
      - "3001:3000"
    environment:
      - NEXT_PUBLIC_BACKEND_URL=ws://localhost:8765
    depends_on:
      - backend

  # Backend - Orchestrates STT (RunPod), LLM (Groq), TTS (RunPod)
  backend:
    image: ghcr.io/kyutai-labs/unmute-backend:latest
    ports:
      - "8765:8765"
    volumes:
      - ./voices.yaml:/app/voices.yaml:ro
      - ./system_prompt.py:/app/system_prompt.py:ro
    environment:
      # LLM Configuration - Groq
      - KYUTAI_LLM_URL=${LLM_URL}
      - KYUTAI_LLM_MODEL=${LLM_MODEL}
      - KYUTAI_LLM_API_KEY=${LLM_API_KEY}

      # STT/TTS Service URLs - RunPod endpoints
      - KYUTAI_STT_URL=${STT_URL}
      - KYUTAI_TTS_URL=${TTS_URL}

# Note: STT and TTS services run on RunPod, not locally
